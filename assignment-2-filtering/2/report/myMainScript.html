
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Q2: Edge-preserving Smoothing using Bilateral Filtering.</title><meta name="generator" content="MATLAB 9.8"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2020-09-28"><meta name="DC.source" content="myMainScript.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Q2: Edge-preserving Smoothing using Bilateral Filtering.</h1><!--introduction--><p>All randomness is seeded so that exact RMSD values can be observed</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">First Image</a></li><li><a href="#5">Second Image</a></li><li><a href="#9">Third Image</a></li><li><a href="#12">References</a></li></ul></div><h2 id="1">First Image</h2><p>Optimized value of Sigma was found empirically to be 1.4 along space and 10 along intensity axis.</p><img vspace="5" hspace="5" src="myMainScript_01.png" alt=""> <pre>Denoised RMSD values for different (spatial sigma, intensity sigma) around optimal pair (1.4,10) are as follows-
Without Filtering - 5.000
(1.4,10) - 3.2908
(0.9*1.4,10)- 3.2961
(1.1*1.4,10) - 3.2925
(1.4,0.9*10) - 3.3154
(1.4,1.1*10) - 3.3039</pre><img vspace="5" hspace="5" src="myMainScript_02.png" alt=""> <h2 id="5">Second Image</h2><p>Optimized value of Sigma was found empirically to be 0.7 along space and 55 along intensity axis.</p><img vspace="5" hspace="5" src="myMainScript_03.png" alt=""> <pre>Denoised RMSD values for different (spatial sigma, intensity sigma) around optimal pair (0.7,55) are as follows-
Without Filtering - 11.7669
(0.7,55) - 7.3971
(0.9*0.7,55)- 7.5501
(1.1*0.7,55) - 7.4692
(0.7,0.9*55) - 7.3991
(0.7,1.1*55) - 7.4181</pre><img vspace="5" hspace="5" src="myMainScript_04.png" alt=""> <h2 id="9">Third Image</h2><p>Optimized value of Sigma was found empirically to be 1.0 along space and 36 along intensity axis. Note that exact values depend on the run as the random seed is not fixed.</p><img vspace="5" hspace="5" src="myMainScript_05.png" alt=""> <pre>Denoised RMSD values for different (spatial sigma, intensity sigma) around optimal pair (1.0,36) are as follows-
Without Filtering - 12.6648
(1.0,36) - 7.3176
(0.9*1.0,36)- 7.3626
(1.1*1.0,36) - 7.3313
(1.0,0.9*36) - 7.3805
(1.0,1.1*36) - 7.3196</pre><img vspace="5" hspace="5" src="myMainScript_06.png" alt=""> <h2 id="12">References</h2><p>Increasing size of figure window - <a href="https://in.mathworks.com/matlabcentral/answers/102219-how-do-i-make-a-figure-full-screen-programmatically-in-matlab">https://in.mathworks.com/matlabcentral/answers/102219-how-do-i-make-a-figure-full-screen-programmatically-in-matlab</a></p><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2020a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Q2: Edge-preserving Smoothing using Bilateral Filtering.
% All randomness is seeded so that exact RMSD values can be observed

%% First Image
%%  
% Optimized value of Sigma was found empirically to be 1.4 along space and
% 10 along intensity axis. 
imstruct = load('../data/barbara.mat');
im = imstruct.imageOrig;
spread = range(im,'all');
rng(0);
noise = (0.05*spread).*randn(size(im,1));
ns = im + noise;
cleaned = myBilateralFiltering(ns,1.0*1.4,1.0*10);
global Gauss
f = figure('visible','on');
f.WindowState = 'maximized';
subplot(1, 3, 1)
imshow(mat2gray(im),'InitialMagnification','fit')
title({'Original Image', 'of Barbara'});
subplot(1, 3, 2)
imshow(mat2gray(ns),'InitialMagnification','fit')
title({'Corrupted Image' ,'of Barbara'});
subplot(1, 3, 3)
imshow(mat2gray(cleaned),'InitialMagnification','fit')
title({'Filtered Image' ,'of Barbara'});
rmsd = sqrt(mean((cleaned-im).^2, 'all'));
ogrmsd = sqrt(mean((ns-im).^2, 'all'));

%%  
%  Denoised RMSD values for different (spatial sigma, intensity sigma) around optimal pair (1.4,10) are as follows-
%  Without Filtering - 5.000
%  (1.4,10) - 3.2908 
%  (0.9*1.4,10)- 3.2961 
%  (1.1*1.4,10) - 3.2925
%  (1.4,0.9*10) - 3.3154
%  (1.4,1.1*10) - 3.3039
%%
f = figure('visible','on');
subplot(1, 1, 1)
imshow(mat2gray(Gauss),'InitialMagnification','fit')
title("Spatial Gaussian Kernel displayed as an image");
%% Second Image
%%
% Optimized value of Sigma was found empirically to be 0.7 along space and
% 55 along intensity axis. 


im = imread('../data/grass.png');
im = double(im);
spread = range(im,'all');
rng(0);
noise = (0.05*spread).*randn(size(im,1));
ns = im + noise;
cleaned = myBilateralFiltering(ns,0.7*1.0,55*1.1);
f = figure('visible','on');
f.WindowState = 'maximized';
subplot(1, 3, 1)
imshow(mat2gray(im),'InitialMagnification','fit')
title("Clean Image of Grass");
subplot(1, 3, 2)
imshow(mat2gray(ns),'InitialMagnification','fit')
title("Corrupted Image of Grass");
subplot(1, 3, 3)
imshow(mat2gray(cleaned),'InitialMagnification','fit')
title("Filtered Image of Grass");
rmsd = sqrt(mean((cleaned-im).^2, 'all'));
ogrmsd = sqrt(mean((ns-im).^2, 'all'));
%%  
%  Denoised RMSD values for different (spatial sigma, intensity sigma) around optimal pair (0.7,55) are as follows-
%  Without Filtering - 11.7669
%  (0.7,55) - 7.3971 
%  (0.9*0.7,55)- 7.5501
%  (1.1*0.7,55) - 7.4692
%  (0.7,0.9*55) - 7.3991
%  (0.7,1.1*55) - 7.4181
%%
f = figure('visible','on');
subplot(1, 1, 1)
imshow(mat2gray(Gauss),'InitialMagnification','fit')
title("Spatial Gaussian Kernel displayed as an image");
%% Third Image
% Optimized value of Sigma was found empirically to be 1.0 along space and
% 36 along intensity axis. Note that exact values depend on the run as the
% random seed is not fixed.

im = imread('../data/honeyCombReal.png');
im = double(im);
spread = range(im,'all');
rng(0);
noise = (0.05*spread).*randn(size(im,1));
ns = im + noise;
cleaned = myBilateralFiltering(ns,1.0*1.0,36*1.0);
f = figure('visible','on');
f.WindowState = 'maximized';
subplot(1, 3, 1)
imshow(mat2gray(im),'InitialMagnification','fit')
title({'Clean Image', 'of Honeycomb'});
subplot(1, 3, 2)
imshow(mat2gray(ns),'InitialMagnification','fit')
title({'Corrupted Image' ,'of Honeycomb'});
subplot(1, 3, 3)
imshow(mat2gray(cleaned),'InitialMagnification','fit')
title({'Filtered Image', 'of Honeycomb'});
rmsd = sqrt(mean((cleaned-im).^2, 'all'));
ogrmsd = sqrt(mean((ns-im).^2, 'all'));
%%  
%  Denoised RMSD values for different (spatial sigma, intensity sigma) around optimal pair (1.0,36) are as follows-
%  Without Filtering - 12.6648
%  (1.0,36) - 7.3176 
%  (0.9*1.0,36)- 7.3626 
%  (1.1*1.0,36) - 7.3313
%  (1.0,0.9*36) - 7.3805
%  (1.0,1.1*36) - 7.3196
%%
f = figure('visible','on');
subplot(1, 1, 1)
imshow(mat2gray(Gauss),'InitialMagnification','fit')
title("Spatial Gaussian Kernel displayed as an image");
%% References
%%  
% Increasing size of figure window - https://in.mathworks.com/matlabcentral/answers/102219-how-do-i-make-a-figure-full-screen-programmatically-in-matlab


##### SOURCE END #####
--></body></html>